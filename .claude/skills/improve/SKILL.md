---
name: improve
description: 기존 코드의 문제를 분석하고 개선하는 워크플로우 스킬. 사용자가 코드 개선, 리팩토링, 코드 리뷰를 요청할 때 사용한다. 사용 시점 - (1) "/improve"를 입력할 때, (2) "이 코드 개선해줘", "리팩토링해줘", "코드 리뷰해줘" 등의 요청이 있을 때, (3) 특정 파일이나 함수의 품질 개선을 요청할 때.
---

# Code Improver

기존 코드의 문제를 분석하고, 사용자 선택에 따라 개선하는 워크플로우.

## 워크플로우

1. 범위 파악 — 분석 대상 코드 식별
2. 문제 분석 — 5개 카테고리로 구조화 분석
3. 방안 제시 — 심각도순 정렬, 코드 예시 포함
4. 선택 — 사용자가 적용할 항목 결정
5. 수정 — 선택된 항목만 반영
6. 검증 — 테스트 실행 + before/after 요약

## 1단계: 범위 파악

- 사용자가 파일/함수/모듈을 지정하면 해당 코드를 읽고 구조를 파악한다
- 지정하지 않으면 "어디를 개선할까요?" 질문한다
- 대상 코드를 읽은 후 다음 단계로 진행한다

## 2단계: 문제 분석

5개 카테고리로 분류하여 분석한다. 문제없는 카테고리는 표시하지 않는다.

| 카테고리 | 분석 내용 |
|---|---|
| 🔴 버그 위험 | 잠재적 런타임 에러, 엣지 케이스 누락, 타입 불일치 |
| 🟡 성능 | 불필요한 연산, N+1 쿼리, 메모리 낭비, 불필요한 리렌더링 |
| 🔵 가독성 | 네이밍, 복잡도, 매직 넘버, 긴 함수 |
| 🟣 구조 | 책임 분리, 의존성, 중복 코드, 패턴 불일치 |
| 🟠 보안 | 인젝션, 검증 누락, 시크릿 노출, XSS |

각 문제에 심각도 태그를 붙인다:

- **critical**: 즉시 수정 필요 (버그, 보안 취약점)
- **warning**: 수정 권장 (성능, 구조 문제)
- **info**: 개선하면 좋음 (가독성)

출력 형식:

```
## 코드 분석: [파일명]

### 🔴 버그 위험
1. [critical] `함수명()` N행 — 문제 설명

### 🟡 성능
2. [warning] `함수명()` N행 — 문제 설명

### 🔵 가독성
3. [info] `함수명()` N행 — 문제 설명
```

## 3단계: 방안 제시

심각도 높은 순으로 정렬하여 테이블로 제시한다.

```
### 방안
| # | 문제 | 해결 방안 | 영향 범위 |
|---|---|---|---|
| 1 | 문제 요약 | 해결 방법 | 이 파일만 / 다른 파일도 |
```

각 방안에 코드 예시를 포함한다. 트레이드오프가 있으면 명시한다.

방안 제시 후 질문한다:

```
> 어떤 항목을 적용할까요? (번호 선택 또는 "전부")
```

## 4단계: 선택

- 사용자가 번호를 선택하면 해당 항목만 적용한다
- "전부"를 선택하면 모든 항목을 적용한다
- 선택하지 않은 항목은 건드리지 않는다

## 5단계: 수정

- 선택된 항목을 코드에 반영한다
- 한 번에 하나씩 적용하여 변경을 추적할 수 있게 한다
- 기존 코드 스타일과 패턴을 유지한다

## 6단계: 검증

수정 완료 후 아래를 수행한다:

1. 기존 테스트가 있으면 실행한다
2. before/after 요약을 출력한다

```
## 변경 요약
- 수정: N건 (critical N, warning N, info N)
- 테스트: ✅ N/N 통과 (또는 ⚠️ 테스트 없음)
- 변경 파일: 파일명 (+추가행 -삭제행)
```